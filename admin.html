<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CV Admin Paneli</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            background-color: #f1f5f9;
            display: block;
            padding: 2rem;
            height: auto;
        }

        .admin-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        h1,
        h2 {
            color: #1e293b;
            margin-bottom: 1rem;
        }

        .form-section {
            margin-bottom: 2rem;
            padding: 1rem;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        input,
        textarea {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #cbd5e1;
            border-radius: 4px;
        }

        textarea {
            min-height: 100px;
        }

        button {
            padding: 0.5rem 1rem;
            background-color: #3b82f6;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 0.5rem;
        }

        button.remove-btn {
            background-color: #ef4444;
        }

        button.add-btn {
            background-color: #22c55e;
            margin-top: 1rem;
        }

        button.save-btn {
            background-color: #1e293b;
            font-size: 1.1rem;
            padding: 1rem 2rem;
            display: block;
            width: 100%;
            margin-top: 2rem;
        }

        .item-container {
            background: #f8fafc;
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 4px;
        }
    </style>
</head>

<body>
    <div class="admin-container">
        <h1>CV DÃ¼zenleme Paneli</h1>
        <p>Bilgilerinizi dÃ¼zenleyin ve "DeÄŸiÅŸiklikleri Ä°ndir" butonuna basarak yeni 'cv-data.js' dosyasÄ±nÄ± indirin.</p>

        <div class="form-section">
            <h2>KiÅŸisel Bilgiler</h2>
            <div class="form-group">
                <label>Ad Soyad</label>
                <input type="text" id="personal-name">
            </div>
            <div class="form-group">
                <label>Ãœnvan</label>
                <input type="text" id="personal-title">
            </div>
            <div class="form-group">
                <label>Profil Resmi (Dosya AdÄ±)</label>
                <input type="text" id="personal-image">
            </div>
            <div class="form-group">
                <label>Ã–zet</label>
                <textarea id="personal-summary"></textarea>
            </div>
        </div>

        <div class="form-section">
            <h2>Yetenekler (VirgÃ¼lle ayÄ±rÄ±n)</h2>
            <textarea id="skills-input"></textarea>
        </div>

        <div class="form-section">
            <h2>Ä°ÅŸ Deneyimi</h2>
            <div id="experience-container"></div>
            <button class="add-btn" onclick="addExperience()">+ Yeni Ä°ÅŸ Ekle</button>
        </div>

        <div class="form-section">
            <h2>Projeler</h2>
            <div id="projects-container"></div>
            <button class="add-btn" onclick="addProject()">+ Yeni Proje Ekle</button>
        </div>

        <button class="save-btn" onclick="saveData()">ðŸ’¾ DeÄŸiÅŸiklikleri Ä°ndir (cv-data.js)</button>
    </div>

    <script src="cv-data.js"></script>
    <script>
        // Populate form with existing data
        document.getElementById('personal-name').value = cvData.personal.name;
        document.getElementById('personal-title').value = cvData.personal.title;
        document.getElementById('personal-image').value = cvData.personal.image;
        document.getElementById('personal-summary').value = cvData.personal.summary;
        document.getElementById('skills-input').value = cvData.skills.join(', ');

        function renderExperience() {
            const container = document.getElementById('experience-container');
            container.innerHTML = '';
            cvData.experience.forEach((job, index) => {
                const div = document.createElement('div');
                div.className = 'item-container';
                div.innerHTML = `
                    <div class="form-group"><label>Pozisyon</label><input type="text" value="${job.title}" onchange="updateExp(${index}, 'title', this.value)"></div>
                    <div class="form-group"><label>Tarih</label><input type="text" value="${job.date}" onchange="updateExp(${index}, 'date', this.value)"></div>
                    <div class="form-group"><label>Åžirket</label><input type="text" value="${job.company}" onchange="updateExp(${index}, 'company', this.value)"></div>
                    <div class="form-group"><label>Detaylar (Her satÄ±r yeni madde)</label><textarea onchange="updateExp(${index}, 'details', this.value)">${job.details.join('\\n')}</textarea></div>
                    <button class="remove-btn" onclick="removeExperience(${index})">Sil</button>
                `;
                container.appendChild(div);
            });
        }

        function renderProjects() {
            const container = document.getElementById('projects-container');
            container.innerHTML = '';
            cvData.projects.forEach((proj, index) => {
                const div = document.createElement('div');
                div.className = 'item-container';
                div.innerHTML = `
                    <div class="form-group"><label>Proje AdÄ±</label><input type="text" value="${proj.title}" onchange="updateProject(${index}, 'title', this.value)"></div>
                    <div class="form-group"><label>AÃ§Ä±klama</label><textarea onchange="updateProject(${index}, 'description', this.value)">${proj.description}</textarea></div>
                    <button class="remove-btn" onclick="removeProject(${index})">Sil</button>
                `;
                container.appendChild(div);
            });
        }

        // Setup
        renderExperience();
        renderProjects();

        // Helper Functions
        window.updateExp = (index, field, value) => {
            if (field === 'details') {
                cvData.experience[index][field] = value.split('\n').filter(line => line.trim() !== '');
            } else {
                cvData.experience[index][field] = value;
            }
        };

        window.removeExperience = (index) => {
            cvData.experience.splice(index, 1);
            renderExperience();
        };

        window.addExperience = () => {
            cvData.experience.push({ title: "Yeni Pozisyon", date: "", company: "", details: [""] });
            renderExperience();
        };

        window.updateProject = (index, field, value) => {
            cvData.projects[index][field] = value;
        };

        window.removeProject = (index) => {
            cvData.projects.splice(index, 1);
            renderProjects();
        };

        window.addProject = () => {
            cvData.projects.push({ title: "Yeni Proje", description: "" });
            renderProjects();
        };

        window.saveData = () => {
            // Update personal details
            cvData.personal.name = document.getElementById('personal-name').value;
            cvData.personal.title = document.getElementById('personal-title').value;
            cvData.personal.image = document.getElementById('personal-image').value;
            cvData.personal.summary = document.getElementById('personal-summary').value;
            cvData.skills = document.getElementById('skills-input').value.split(',').map(s => s.trim()).filter(s => s !== '');

            const fileContent = `const cvData = ${JSON.stringify(cvData, null, 4)};`;

            // Create Blob and download
            const blob = new Blob([fileContent], { type: 'text/javascript' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'cv-data.js';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            alert('cv-data.js dosyasÄ± indirildi! LÃ¼tfen bu dosyayÄ± projedeki mevcut dosya ile deÄŸiÅŸtirin.');
        };
    </script>
</body>

</html>